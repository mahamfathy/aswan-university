<section class="space-y-6 mx-20 mt-8 text-right">
  <h1
    class="text-3xl font-bold text-[#075169] border-b-4 border-yellow-400 pb-2"
  >
    ๐ฐ ูุงุฆูุฉ ุงูุฃุฎุจุงุฑ
  </h1>
  @for (news of newsList; track news.id) {

  <div
    class="bg-white border border-gray-200 rounded-lg shadow hover:shadow-lg transition duration-300 p-6 relative group"
  >
    <h3 class="text-xl font-semibold text-[#333] mb-2">{{ news.title }}</h3>
    <p class="text-gray-700 mb-2 leading-relaxed">{{ news.content }}</p>
    <small class="text-sm text-gray-500 italic">{{ news.date }}</small>

    <div
      class="absolute top-3 left-3 flex gap-2 opacity-0 group-hover:opacity-100 transition"
    >
      <button
        (click)="openEdit(news)"
        class="text-blue-600 hover:text-blue-800 p-2 rounded hover:bg-blue-100"
        title="ุชุนุฏูู"
      >
        <i class="fas fa-edit"></i>
      </button>
      <button
        (click)="openDeleteDialog(news)"
        class="text-red-600 hover:text-red-800 p-2 rounded hover:bg-red-100"
        title="ุญุฐู"
      >
        <i class="fas fa-trash-alt"></i>
      </button>
    </div>
  </div>
  }

  <button
    class="mt-6 flex items-center gap-2 px-6 py-3 bg-[#075169] text-white rounded-md hover:bg-[#06405b] transition shadow"
    (click)="openFormForNew()"
  >
    <i class="fas fa-plus"></i>
    ุฅุถุงูุฉ ุฎุจุฑ ุฌุฏูุฏ
  </button>
</section>

@defer (when showForm) {
<div
  #formSection
  class="mt-6 bg-white p-6 rounded-lg text-end shadow-lg max-w-3xl mx-auto"
>
  <form [formGroup]="newsForm" (ngSubmit)="onSubmit()" class="space-y-4">
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 mb-2">ุนููุงู ุงูุฎุจุฑ</label>
      <input
        formControlName="title"
        type="text"
        placeholder="ุงูุชุจ ุนููุงููุง ูุงุถุญูุง"
        [class.border-red-500]="
          newsForm.get('title')?.touched && newsForm.get('title')?.invalid
        "
        class="px-4 py-3 text-end border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      <span
        *ngIf="newsForm.get('title')?.touched && newsForm.get('title')?.invalid"
        class="text-sm text-red-600 mt-1"
      >
        ูุฌุจ ุฅุฏุฎุงู ุนููุงู ุงูุฎุจุฑ
      </span>
    </div>

    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 mb-2">ูุญุชูู ุงูุฎุจุฑ</label>
      <textarea
        formControlName="content"
        rows="5"
        placeholder="ุงูุชุจ ุชูุงุตูู ุงูุฎุจุฑ"
        [class.border-red-500]="
          newsForm.get('content')?.touched && newsForm.get('content')?.invalid
        "
        class="px-4 py-3 border text-end rounded-md shadow-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"
      ></textarea>
      <span
        *ngIf="
          newsForm.get('content')?.touched && newsForm.get('content')?.invalid
        "
        class="text-sm text-red-600 mt-1"
      >
        ูุฌุจ ุฅุฏุฎุงู ูุญุชูู ุงูุฎุจุฑ
      </span>
    </div>

    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 mb-2">ุชุงุฑูุฎ ุงููุดุฑ</label>
      <input
        formControlName="date"
        type="date"
        [class.border-red-500]="
          newsForm.get('date')?.touched && newsForm.get('date')?.invalid
        "
        class="px-4 py-3 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      <span
        *ngIf="newsForm.get('date')?.touched && newsForm.get('date')?.invalid"
        class="text-sm text-red-600 mt-1"
      >
        ูุฌุจ ุชุญุฏูุฏ ุชุงุฑูุฎ ุงููุดุฑ
      </span>
    </div>

    <div class="flex gap-4 justify-end">
      <button
        type="submit"
        [disabled]="newsForm.invalid"
        class="px-6 py-2 bg-green-600 text-white rounded-md shadow hover:bg-green-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed"
      >
        {{ isEditing ? "ุชุญุฏูุซ ุงูุฎุจุฑ" : "ูุดุฑ ุงูุฎุจุฑ" }}
      </button>
      <button
        type="button"
        (click)="cancelEdit()"
        class="px-6 py-2 bg-gray-300 text-gray-800 rounded-md shadow hover:bg-gray-400 transition"
      >
        ุฅูุบุงุก
      </button>
    </div>
  </form>
</div>
}
